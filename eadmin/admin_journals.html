<div><center>This widget is attempting to put an iframe into a custom placard area</center></div>
<div id="mysearch" style="display:none">ep.SearchTerm</div>

<script type="text/javascript" language="Javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<script type="text/javascript">
// functions
function CleanSearchTerm(strTerm) {
    strTerm = strTerm.toLowerCase();

    // strip the word "journal" from search terms - all these searches are for journals
    strTerm = strTerm.replace('journal','');

    // TI and AU prefixes exist at this point - so lets strip out TI if it starts the phrase
    if (strTerm.indexOf("ti ") === 0) {
        strTerm = strTerm.replace('ti ','');
    }

    // Trim leading/trailing spaces
    strTerm = strTerm.trim();
    
    return strTerm;
}

function NoPlacard() {
    $('.related-info-area:contains("Placard (iframe) - journals")', window.parent.document).css('display','none');
}

// Main body of script
var searchterm = document.getElementById('mysearch').innerHTML;
searchterm = CleanSearchTerm(searchterm);  

if(searchterm === "blood" || searchterm === "nature" || searchterm === "science"){
    
    var resultdiv1 = '<div id="bartonplus_placard"><iframe src="//libraries.mit.edu/eds/placard_journals.php?term=' + searchterm + '" seamless="seamless" width="100%"></iframe></div>';    
    $('.result-list', window.parent.document).before(resultdiv1);
    $('.related-info-area:contains("Placard (iframe) - journals")', window.parent.document).css('display','none');
    
}
else {
    NoPlacard();
};
</script>